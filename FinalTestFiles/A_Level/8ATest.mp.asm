BR L0
L1:
ADD SP #0 SP
PUSH 2(D1)
BRFS L2
PUSH #0
POP 2(D0)
PUSH D1
PUSH 1(D1)
SUB SP #2 D1
CALL L1
SUB SP #1 SP
POP D1
BR L3
L2:
PUSH #9000
PUSH @1(D1)
SUB SP #1 SP
CASTSF
ADD SP #1 SP
ADDSF
POP @1(D1)
L3:
SUB SP #0 SP
RET
L4:
ADD SP #0 SP
PUSH D1
PUSH 1(D1)
SUB SP #2 D1
CALL L1
SUB SP #1 SP
POP D1
SUB SP #0 SP
RET
L5:
ADD SP #0 SP
PUSH D1
PUSH 1(D1)
SUB SP #2 D1
CALL L4
SUB SP #1 SP
POP D1
SUB SP #0 SP
RET
L0:
PUSH D0
ADD SP #2 SP
SUB SP #3 D0
PUSH #"This is test 9 for level A"
WRTS
PUSH #""
WRTLNS
PUSH #"This will be a deep test of pass by reference"
WRTS
PUSH #""
WRTLNS
PUSH #1
PUSH #2
CMPNES
POP 2(D0)
PUSH #1
CASTSF
POP 1(D0)
PUSH D1
PUSH D0
PUSH #1
ADDS
SUB SP #2 D1
CALL L5
SUB SP #1 SP
POP D1
PUSH #"x is "
WRTS
PUSH 1(D0)
WRTS
PUSH #""
WRTLNS
PUSH #"If x is over 9000, you have succeeded"
WRTS
PUSH #""
WRTLNS
SUB SP #2 SP
POP D0
HLT
